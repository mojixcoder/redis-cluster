
## Redis Cluster Kubernetes Helm Charts

This repository contains Redis cluster helm charts that can survive pod restarts in which the pod IPs get changed afterwards, the cluster will be recovered successfully.

![Redis-Cluster](data:image/png;base64,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)

### Parameters

| Name | Description | Example |
|--|--|--|
 `nameOverride` | String to override `redis-cluster.name` template | `redis-cluster`
`fullnameOverride` | String to override `redis-cluster.fullname`  `template` | `redis-cluster`
`redis.image` | Redis docker image | `redis:7.2.3`
`redis.port` | Redis server port | `6379`
`redis.bus` | Redis cluster bus port | `16379`
`redis.resources` | The resources of the redis container | `{}`
`cluster.init` | A boolean to specify whether the cluster should be initialized. (Can be false when cluster is already created and maybe you just want to change the resources of the cluster) | `true`
`cluster.master` | Number of master nodes | `3`
`cluster.replicas` | Number of replicas of each master | `1`
`metrics.enabled` | Turn on/off Redis exporter | `true`
`metrics.image` | Docker image of Redis exporter | `oliver006/redis_exporter:v1.55.0`
`metrics.resources` | Resources of metrics container | `{}`
`metrics.serviceMonitor.enabled` | Create a service monitor if `metrics` is enabled | `true`
`metrics.serviceMonitor.interval` | Metrics scraping interval | `30s`
`service.enabled` | Create a service to access the cluster | `true`
`service.type` | Service type | `ClusterIP`
`persistence.storage` | volume storage | `2Gi`
`persistence.accessModes` | volume access modes | `["ReadWriteOnce"]`
`persistence.storageClassName`| Storage class name of PVC | `ceph-rdb`
`extraConfig`| Passing extra key-value configs to redis.conf | `{}`

Please see the values.yaml to see how these parameters are used.

### Deploy

Clone the repo and `cd` to the repo directory.

```
helm upgrade -i redis-cluster . -f values.yaml
```
